name: dotnet
'on':
  push:
    paths:
    - .github/workflows/sample1.yaml
jobs:
  build:
    runs-on: ubuntu-latest
    env:
      AZURE_DEPLOY_ENVIRONMENT: dev
      AZURE_RESOURCE_GROUP: rg-by-workflow-shared-dev-eus2-01
      AZURE_WEB_APP_TYPE: java
    steps:
    - uses: actions/checkout@v2
    - name: get url
      run: |
        if [ ! -f .github/webapps/webapps.json ]
        then
          mkdir -p .github/webapps/webapps.json
          echo "created new file"
        fi
      
    - name: "add json"
      run: |
        cat >./config.json first <<EOF
            {
              "wifi": {
                 "ssid": "$AZURE_DEPLOY_ENVIRONMENT",
                  "pw":   "$AZURE_WEB_APP_TYPE"
              }
           }
        EOF
    - name: "add json next"
      run: |
        head -n-2 config.json
    - name: "add json next"
      run: |
        cat >>./config.json <<EOF
              },
              "wifi": {
                 "ssid": "$AZURE_DEPLOY_ENVIRONMENT",
                  "pw":   "$AZURE_WEB_APP_TYPE"
              }
           }
        EOF
    - name: "add json"
      run: |
        cat config.json
